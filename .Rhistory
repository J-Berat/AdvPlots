library(questionr)
library(dplyr)
library(graphics)
library(stats)
# Base de données (BDD)
load("~/Desktop/Master/R_Master/bechdel.RData")
View(bechdel) # Pour avoir une vue globale sur la BDD, il y a à la fois des données numériques et des données en chaines de caractères.
names(bechdel) # Pour obtenir le nombre de variables, ici il y en a 14.
nrow(bechdel) # Pour obtenir les unités statistiques, ici il y en a 1794.
bechdel$result_test <- ifelse(rowSums(bechdel[, c("named_women","talking_women","liberated_talk")]) == 3,
"PASS",
"FAIL")
table_succes <- table(bechdel$result_test)
barplot(table_succes,
col = c("firebrick","forestgreen"),
main = "Distribution du test de Bechdel sur la BDD",
xlab = "résultat",
ylab = "Nombre")
proportion_femmes <- mean(bechdel$named_women == 0, na.rm = TRUE)
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE)
proportion_discussionhomme <- mean(bechdel$named_women == 1 & bechdel$talking_women == 1 & bechdel$liberated_talk == 0, na.rm = TRUE)
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE)/n(table_succes$FAIL)
table_succes$FAIL
table_succes <- table(bechdel$result_test)
table_succes
table_succes$PASS
table_succes["FAIL"]
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE)/n(table_succes["FAIL"])
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE)/table_succes["FAIL"]
table_succes["FAIL"][1]
table_succes <- table(bechdel$result_test)
n(table_succes
)
n(table_succes)
n(bechdel)
proportion_discussionhomme <- mean(bechdel$named_women == 1 & bechdel$talking_women == 1 & bechdel$liberated_talk == 0, na.rm = TRUE)/table_succes["FAIL",1]
table_succes["FAIL",0]
table_succes["FAIL"][0]
table_succes["FAIL"]
table_succes["FAIL"]
table_succes$FAIL
table_succes[1]
table_succes[1]
n(bechdel$result_test)
FAIL <- sum(bechdel$result_test == "FAIL")
PASS <- sum(bechdel$result_test == "PASS")
PASS
FQIL
FAIL
proportion_femmes <- mean(bechdel$named_women == 0, na.rm = TRUE)
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE)/FAIL
proportion_discussionhomme <- mean(bechdel$named_women == 1 & bechdel$talking_women == 1 & bechdel$liberated_talk == 0, na.rm = TRUE)/FAIL
library(questionr)
library(dplyr)
library(graphics)
library(stats)
load("~/Desktop/Master/R_Master/bechdel.RData")
View(bechdel) # Pour avoir une vue globale sur la BDD, il y a à la fois des données numériques et des données en chaines de caractères.
names(bechdel) # Pour obtenir le nombre de variables, ici il y en a 14.
nrow(bechdel) # Pour obtenir les unités statistiques, ici il y en a 1794.
bechdel$result_test <- ifelse(rowSums(bechdel[, c("named_women","talking_women","liberated_talk")]) == 3,
"PASS",
"FAIL")
> FAIL <- sum(bechdel$result_test == "FAIL")
PASS <- sum(bechdel$result_test == "PASS")
PASS
proportion_femmes <- mean(bechdel$named_women == 0, na.rm = TRUE)
/FAIL
proportion_discussion <- mean((bechdel$named_women == 1 & bechdel$talking_women == 0) /FAIL, na.rm = TRUE)
proportion_discussion <- mean((bechdel$named_women == 1 & bechdel$talking_women == 0)) / FAIL
proportion_discussion <- mean((bechdel$named_women == 1 & bechdel$talking_women == 0)) / FAIL
proportion_femmes <- mean(bechdel$named_women == 0, na.rm = TRUE)/FAIL
table_succes["FAIL"]
proportion_femmes <- mean(bechdel$named_women == 0, na.rm = TRUE)
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0 & bechdel$liberated_talk == 0, na.rm = TRUE)/FAIL
proportion_femmes <- mean(bechdel$named_women == 0, na.rm = TRUE)
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE)
proportion_discussionhomme <- mean(bechdel$named_women == 1 & bechdel$talking_women == 1 & bechdel$liberated_talk == 0, na.rm = TRUE)
propFAIL <- mean(bechdel$result_test == "FAIL")
propFAIL <- mean(bechdel$result_test == "FAIL",  na.rm = TRUE) #
propPASS <- mean(bechdel$result_test == "PASS",  na.rm = TRUE) #
#EXERCICE pour le 1er décembre --- Jack Berat M1 PDI
# Packages
library(questionr)
library(dplyr)
library(graphics)
library(stats)
# Base de données (BDD)
load("~/Desktop/Master/R_Master/bechdel.RData")
# Test de Bechdel :
# ... 1. Il y a plus d'un personnage féminin
# ... 2. Au moins deux personnages féminins se parlent dans le film
# ... 3. Elles parlent d'autre chose que d'un personnage masculin.
# Il faut que tous les critères soient remplis pour que le test soit valide.
#1. Décrivez la base de données (nb de variables, nb de lignes...).
# Décrivez ce que représentent les individus statistiques et les variables incluses.
# Aidez-vous de la documentation : https://fivethirtyeight.com/features/the-dollar-and-cents-case-against-hollywoods-exclusion-of-women/
# Description de la base de donnees
View(bechdel) # Pour avoir une vue globale sur la BDD, il y a à la fois des données numériques et des données en chaines de caractères.
names(bechdel) # Pour obtenir le nombre de variables, ici il y en a 14.
nrow(bechdel) # Pour obtenir les unités statistiques, ici il y en a 1794.
# Les variables incluses sont :
# "year" -> L'année de sortie du film,
# "title" -> Le titre du film,
# "clean_test" -> Test de Bechdel ok si oui, sinon il y a une explicitation de l'echec du test,
# "budget" -> Le budget en $ du film,
# "domgros" -> Recettes domestiques (USA),
# "intgross" -> Recettes à l'international (hors USA),
# "budget_2013" -> Budget ajusté à l’inflation (en $ en 2013),
# "domgross_2013" -> Recettes domestiques ajustées (2013),
# "intgross_2013" -> Recettes internationales ajustées (2013),
# "period_code" -> Code de la période,
# "decade_code" -> Code pour la décennie, 1 = 2010s, 2 = 2000s ...,
# "named_women" -> Deux femmes au moins dans le film,
# "talking_women" -> Au moins deux personnages féminins se parlent dans le film,
# "liberated_talk" -> Elles parlent d'autre chose que d'un personnage masculin,
# /1 pt
#2. À partir des variables suivantes :
# ... "named_women" ; "talking_women" ; "liberated_talk" ;
# ... créez une variable binaire, appelée "result_test", avec deux modalités :
# ... "pass" (le test est réussi) ou "fail" (le test est raté)
# Je fais la somme des booleens sur chaque ligne de la BDD uniquement pour les colonnes "named_women","talking_women","liberated_talk",
# si c'est égal à 3, alors le film passe le test (PASS), sinon le film ne passe pas le test (FAIL)
bechdel$result_test <- ifelse(rowSums(bechdel[, c("named_women","talking_women","liberated_talk")]) == 3,
"PASS",
"FAIL")
# /2 pts
#3. Observez la distribution de cette variable. Commentez.
# Pour la distribution de la variable on peut faire le tableau qui distingue les FAIL des PASS
# Pour une representation visuelle, on peut faire un histogramme de la distribution.
table_succes <- table(bechdel$result_test)
barplot(table_succes,
col = c("firebrick","forestgreen"),
main = "Distribution du test de Bechdel sur la BDD",
xlab = "Résultat du test",
ylab = "Nombre")
FAIL <- sum(bechdel$result_test == "FAIL") # 991
PASS <- sum(bechdel$result_test == "PASS") # 803
propFAIL <- mean(bechdel$result_test == "FAIL",  na.rm = TRUE) # 0.55
propPASS <- mean(bechdel$result_test == "PASS",  na.rm = TRUE) # 0.45
# On voit qu'il y a plus de films de la BDD qui ne passent pas le test que de films qui passent le test.
# /1 pts
#4. Quelle proportion de films échouent au test
# ... parce qu'il n'y a pas de femmes ?
# ... parce que les femmes ne parlent pas entre elles ?
# ... parce que les femmes ne parlent pas d'autre chose que d'un homme ?
proportion_femmes <- mean(bechdel$named_women == 0, na.rm = TRUE)
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE) / propFAIL
proportion_discussionhomme <- mean(bechdel$named_women == 1 & bechdel$talking_women == 1 & bechdel$liberated_talk == 0, na.rm = TRUE) / propFAIL
# /3 pts
#5. Créez une variable "decennie", qui regroupe les années en une
# ... modalité par décennie. Par ex, tous les films entre 1970 et 1979
# ... d'après la variable "year" seront dans la modalité "1970s".
bechdel$decennie <- paste0((bechdel$year %/% 10) * 10, "s")
# /1 pts
#6. Comment évolue la réussite du test selon la décennie ? Commentez.
prop_decennie <- bechdel %>%
group_by(decennie) %>%
summarise(
proportion_pass = mean(result_test == "PASS")
)
prop_decennie$proportion_fail <- 1 - prop_decennie$proportion_pass
mat <- t(as.matrix(prop_decennie[, c("proportion_pass", "proportion_fail")]))
barplot(
mat * 100,
beside = TRUE,
col = c("forestgreen", "firebrick"),
ylim = c(0, 100),
main = "Pourcentage de films pass/fail par décennie",
xlab = "Décennies",
ylab = "Pourcentage (%)",
names.arg = prop_decennie$decennie
)
legend(
"topright",
inset = c(-.01, 0),
legend = c("Pass", "Fail"),
xpd = TRUE,
fill = c("forestgreen", "firebrick"),
bty = "n"
)
# /2 pts
# BONUS. En moyenne, est-ce que les films qui réussissent le test rapportent
# ... plus d'argent à l'international que les films qui échouent ?
# ... Et aux États-Unis ?
revenus <- bechdel %>%
group_by(result_test) %>%
summarise(
MeanDom = mean(domgross, na.rm = TRUE),
MeanDom13 = mean(domgross_2013, na.rm = TRUE),
MeanInt = mean(intgross, na.rm = TRUE),
MeanInt13 = mean(intgross_2013, na.rm = TRUE)
)
# Dans les deux cas, aux USA ou à l'international,
# les films qui ne reussissent pas le test, rapportent le plus d'argent
# Ce, que ce soit avec l'inflation ou non.
# Note finale : /10
51 + 33 + 8
proportion_femmes <- mean(bechdel$named_women == 0 & bechdel$talking_women == 0 & bechdel$liberated_talk == 0, na.rm = TRUE)
proportion_femmes <- mean(bechdel$named_women == 0 & bechdel$talking_women == 0 & bechdel$liberated_talk == 0, na.rm = TRUE) / propFAIL
proportion_femmes <- mean(bechdel$named_women == 0 & bechdel$talking_women == 0 & bechdel$liberated_talk == 0, na.rm = TRUE)
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE)
proportion_discussionhomme <- mean(bechdel$named_women == 1 & bechdel$talking_women == 1 & bechdel$liberated_talk == 0, na.rm = TRUE)
proportion_femmes <- mean(bechdel$named_women == 0, na.rm = TRUE) / propFAIL
proportion_discussion <- mean(bechdel$named_women == 1 & bechdel$talking_women == 0, na.rm = TRUE) / propFAIL
proportion_discussionhomme <- mean(bechdel$named_women == 1 & bechdel$talking_women == 1 & bechdel$liberated_talk == 0, na.rm = TRUE) / propFAIL
